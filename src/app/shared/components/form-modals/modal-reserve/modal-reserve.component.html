<p-button
  label="AGREGAR"
  icon="pi pi-plus"
  styleClass=" bg-[#0b3954] hover:bg-[#0b3954de] border-[#0b3954]"
  (click)="openModalReserve()"
/>
<p-dialog
  [(visible)]="modalReserve"
  [modal]="true"
  [closable]="true"
  closeOnEscape="false"
  [style]="{ width: '35vw' }"
  [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }"
  draggable="false"
  header="Realizar Reserva"
  (onHide)="closeModalReserve()"
>
  <p-divider class="mt-0" />
  <form [formGroup]="reservationForm" (ngSubmit)="onSubmitReserve()">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
      <div class="flex flex-col">
        <label class="font-medium" for="reservationDate">Fecha</label>
        <p-datepicker
          formControlName="reservationDate"
          inputId="reservationDate"
          showIcon
          iconDisplay="input"
          styleClass="w-full"
          dateFormat="dd/mm/yy"
          [minDate]="minDate"
          [maxDate]="maxDate"
          [disabledDates]="disabledDates"
          [disabledDays]="[0]"
          [appendTo]="'body'"
          [ngClass]="{
            'ng-invalid ng-dirty':
              reservationForm.get('reservationDate')?.touched &&
              reservationForm.get('reservationDate')?.invalid
          }"
        />
        <app-form-error
          [control]="reservationForm.get('reservationDate')"
          [validationMessage]="'La fecha es requerida'"
        ></app-form-error>
      </div>
      <div class="flex flex-col">
        <label class="font-medium" for="day">DÃ­a</label>
        <input pInputText id="day" formControlName="day" />
      </div>
      <div class="flex flex-col">
        <label class="font-medium" for="startTime">Hora inicio</label>
        <p-select
          fluid
          formControlName="startTime"
          id="startTime"
          [options]="filteredStartSlots"
          optionLabel="startTime"
          optionValue="startTime"
          [filter]="true"
          [showClear]="true"
          [placeholder]="'Seleccione una hora de inicio'"
          [appendTo]="'body'"
          [ngClass]="{
            'ng-invalid ng-dirty':
              reservationForm.get('startTime')?.touched &&
              reservationForm.get('startTime')?.invalid
          }"
        />
        <app-form-error
          [control]="reservationForm.get('startTime')"
          [validationMessage]="'La hora de inicio es requerida'"
        ></app-form-error>
      </div>
      <div class="flex flex-col">
        <label class="font-medium" for="endTime">Hora fin</label>
        <p-select
          fluid
          formControlName="endTime"
          id="endTime"
          [options]="filteredEndSlots"
          optionLabel="endTime"
          optionValue="endTime"
          [filter]="true"
          [showClear]="true"
          [placeholder]="'Seleccione una hora de inicio'"
          [appendTo]="'body'"
          [ngClass]="{
            'ng-invalid ng-dirty':
              reservationForm.get('endTime')?.touched &&
              reservationForm.get('endTime')?.invalid
          }"
        />
        <app-form-error
          [control]="reservationForm.get('endTime')"
          [validationMessage]="'La hora de fin es requerida'"
        ></app-form-error>
      </div>
      <div class="flex flex-col md:col-span-2">
        <label class="font-medium" for="minutes">Total de minutos</label>
        <input
          readonly
          type="text"
          id="minutes"
          pInputText
          formControlName="minutes"
          [ngClass]="{
            'ng-invalid ng-dirty':
              reservationForm.get('minutes')?.touched &&
              reservationForm.get('minutes')?.invalid
          }"
        />
      </div>
      <!-- tipe machine -->
      <div class="flex flex-col md:col-span-1">
        <label class="font-medium" for="tipeMachine">Tipo Maquina</label>
        <p-select
          fluid
          formControlName="tipeMachine"
          id="tipeMachine"
          [options]="tiposMaquina"
          optionLabel="name"
          optionValue="name"
          [filter]="true"
          [showClear]="true"
          [placeholder]="'Seleccione el tipo de maquina'"
          [appendTo]="'body'"
          [ngClass]="{
            'ng-invalid ng-dirty':
              reservationForm.get('tipeMachine')?.touched &&
              reservationForm.get('tipeMachine')?.invalid
          }"
        />
      </div>
      <div class="flex flex-col md:col-span-1">
        <label class="font-medium" for="machine">Maquina</label>
        <p-multiselect
          fluid
          formControlName="machine"
          id="machine"
          [options]="filteredMaquinas"
          optionLabel="name"
          optionValue="name"
          [filter]="true"
          [showClear]="true"
          [placeholder]="'Seleccione una maquina'"
          [appendTo]="'body'"
          [ngClass]="{
            'ng-invalid ng-dirty':
              reservationForm.get('machine')?.touched &&
              reservationForm.get('machine')?.invalid
          }"
        />
      </div>
    </div>
    <p-button
      label="RESERVAR"
      type="submit"
      icon="pi pi-save"
      class="flex justify-center col-span-2"
      styleClass=" col-span-2 bg-green-600 hover:bg-green-500 border-green-600"
    />
  </form>
</p-dialog>
